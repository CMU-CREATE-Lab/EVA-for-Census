<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Visualization</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/css/bootstrap.min.css"> 
    <link href="css/slider.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/js/bootstrap.min.js"></script>
    <script src="js/bootstrap-slider.js"></script>
    <script src="js/modernizr.js"></script>
    <script src="js/three.min.js"></script>
    <script src="js/vis.js"></script>
    <script src="js/TrackballControls.js"></script>
    <script src="js/stats.min.js"></script>
  </head>
  <body>
    <div id="stat"></div>
    <div id="drawCanvas"></div>

    <div id="params1">

      <div class="panel panel-success">
        <div class="panel-heading">
          <h3 class="panel-title">Parameters</h3>
        </div>
        <table class="table tablenoborder">
          <tr>
            <td>
              <input type="text" class="span2" value="" data-slider-min="-20" data-slider-max="20" data-slider-step="0.1" data-slider-value="-0.001" id="zSlider" data-slider-id="ZS" data-slider-orientation="vertical" data-slider-tooltip="hide" data-slider-selection="after">
            </td>
            <td>
              <input type="text" class="span2" value="" data-slider-min="0" data-slider-max="100" data-slider-step="0.1" data-slider-value="100" id="fSlider" data-slider-id="FS" data-slider-orientation="vertical" data-slider-tooltip="hide" data-slider-selection="after">
            </td>
            <td>
              <input type="text" class="span2" value="" data-slider-min="1" data-slider-max="10" data-slider-step="0.1" data-slider-value="10" id="dSlider" data-slider-id="DS" data-slider-orientation="vertical" data-slider-tooltip="hide" data-slider-selection="after">
            </td>
            <tr>
              <td data-toggle="tooltip" title="Z value of the last data point">H</td>
              <td data-toggle="tooltip" title="Number of cycles">C</td>
              <td data-toggle="tooltip" title="Distance between two consecutive datapoints">D</td>
            </tr>
          </table>
        </div>

        <div class="panel panel-warning">
          <div class="panel-heading">
            <h3 class="panel-title">Information</h3>
          </div>
          <table class="table table-striped">
            <tr>
              <td><b>Height</b></td>
              <td id="Zindicator"></td>
            </tr>
            <tr>
              <td><b>Cycles</b></td>
              <td id="Findicator"></td>
            </tr>
            <tr>
              <td><b>Distance</b></td>
              <td id="Dindicator"></td>
            </tr>
          </table>
        </div>

      </div>

      <div id="params2">

        <div class="panel panel-primary">
          <div class="panel-heading">
            <h3 class="panel-title">Camera Type</h3>
          </div>
          <form>
            <div class="radio">
              <label>
                <input type="radio" name="cameraRadios" id="perspectiveRadio" onclick="setCameraType('perspective');" checked>Perspective
              </label>
            </div>

            <div class="radio">
              <label>
                <input type="radio" name="cameraRadios" id="orthographicRadio" onclick="setCameraType('orthographic');">Orthographic
              </label>
            </div>
          </form>
        </div>

        <div class="panel panel-info">
          <div class="panel-heading">
            <h3 class="panel-title">Settings</h3>
          </div>
          <form>
            <div class="checkbox">
              <label>
                <input type="checkbox" onclick="setAxisHelper(this.checked);" checked>
                Axis Helper
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" onclick="setGridXY(this.checked);">
                Grid XY Helper
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" onclick="setGridXZ(this.checked);">
                Grid XZ Helper
              </label>
            </div>
             <div class="checkbox">
              <label>
                <input type="checkbox" onclick="setGridYZ(this.checked);">
                Grid YZ Helper
              </label>
            </div>
          </form>
        </div>

      </div>

    </body>
    <script>
      $(document).ready(function(){

        $('td').tooltip({'selector': '', 'placement': 'left', container: 'body'});


        var oldZ = -100, oldF = -100, oldD = -100, z, f, d;

        var getSliderVals = function() {
          z = (parseFloat($('#zSlider').attr('data-slider-max')) - Z.getValue() + parseFloat($('#zSlider').attr('data-slider-min')));
          $('#Zindicator').text(z.toFixed(1));
          f = (parseFloat($('#fSlider').attr('data-slider-max')) - F.getValue() + parseFloat($('#fSlider').attr('data-slider-min')))/10;
          $('#Findicator').text(f.toFixed(1));
          d = (parseFloat($('#dSlider').attr('data-slider-max')) - D.getValue() + parseFloat($('#dSlider').attr('data-slider-min')))/10;
          $('#Dindicator').text(d.toFixed(2));
        };

        var changed = function() {
          getSliderVals();
          if (z != oldZ) {
            draw(z, f, d);
            oldZ = z;
          }
          if (d != oldD) {
            draw(z, f, d);
            oldD = d;
          }
          if (f != oldF) {
            draw(z, f, d);
            oldF = f;
          }
        };

        var Z = $('#zSlider').slider()
        .on('slide', changed)
        .data('slider');

        var F = $('#fSlider').slider()
        .on('slide', changed)
        .data('slider');

        var D = $('#dSlider').slider()
        .on('slide', changed)
        .data('slider');

        getSliderVals();

        init($('#drawCanvas'), $('#stat'));
      });
    </script>
  </html>
